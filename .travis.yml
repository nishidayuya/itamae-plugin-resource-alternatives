sudo: required

language: ruby

rvm:
  - ruby-head
  - 2.3.1
  - 2.2
  - 2.1

services:
  - docker

env:
  global:
    - VAGRANT_VERSION=1.8.4
  matrix:
    - TARGET=debian
    - TARGET=ubuntu

before_install:
  - gem update bundler
  - wget https://releases.hashicorp.com/vagrant/${VAGRANT_VERSION}/vagrant_${VAGRANT_VERSION}_x86_64.deb
  - sudo dpkg -i vagrant_${VAGRANT_VERSION}_x86_64.deb

script:
  - bundle exec rake spec:${TARGET}
  - bundle exec rake build
